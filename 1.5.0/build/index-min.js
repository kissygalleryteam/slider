KISSY.add("kg/slider/1.5.0/index",["base","dd","node"],function(e,a,s,t){var r,n=a("base"),i=a("dd"),c=a("node");r=function(e){var a=c.all,s=n,t=i,r={typeOf:function(e){return toString.apply(e).replace(/^\[\w*\s*|\]$/gi,"")},isPercent:function(e){return/^\d{1,3}%$/.test(e)},ascendSort:function(e){return e.sort(function(e,a){return e>a?1:-1})},collectionGarbage:function(e){for(var a in e)e.hasOwnProperty(a)&&delete e[a];return a=e=e.__proto__=null},parseIntByStep:function(e,a){return parseInt(e/a)*a},emptyEventFunc:function(){}},l=function(e,a,s){var t=a.value_,n=a.min_,i=a.max_,c=a.step_>0?a.step_:1,l=a.type_;if("range"!==l||"Array"===r.typeOf(t)){if("range"===l)var d=t[0],o=t[1],_=a.$slider_handle,u=a.$slider_handle2;switch(s){case 37:case 40:switch(l){case"value":case"min":t>n&&(t-=c);break;case"range":switch(e){case _:d>n&&(d-=c,t=[d,o]);break;case u:o>n&&(o-=c,d>o&&(o=d),t=[d,o])}break;case"max":i>t&&(t+=c)}break;case 38:case 39:switch(l){case"value":case"min":i>t&&(t+=c);break;case"range":switch(e){case _:i>d&&(d+=c,d>o&&(d=o),t=[d,o]);break;case u:i>o&&(o+=c,t=[d,o])}break;case"max":t>n&&(t-=c)}}return t}};!function(){var e,a,s,r,n,i,c,l,d,o,_,u,h,p,v,b,f,g,m,k,y,w,$,I,x,O,z,S,C=t.DDM,H=null,M=null,W=null,B=null,E=null,F=null;C.on("dragstart",function(e){if(W=e.drag.get("node"),H=W.__self__,v=H.readOnly_,b=H.disabled_,!v&&!b){if(H.$dragHandle=W,M=H.$slider,E=H.$slider_handle,F=H.$slider_handle2,B=H.$slider_track,f=H.orientation_,c=M.outerWidth(),l=M.outerHeight(),d=B.outerWidth(),o=B.outerHeight(),_=W.outerWidth(),u=W.outerHeight(),h=M.offset().left,p=M.offset().top,g=H.type_,m=H.step_,k=H.min_,y=H.max_,"range"===g){switch(f){case"horizontal":switch(W){case E:n=parseInt(F.css("left"));break;case F:n=parseInt(E.css("left"))}break;case"vertical":switch(W){case E:i=parseInt(F.css("bottom"));break;case F:i=parseInt(E.css("bottom"))}}switch(W){case E:F.css("z-index","auto"),E.css("z-index",1);break;case F:E.css("z-index","auto"),F.css("z-index",1)}}H.fire("start")}}).on("drag",function(t){switch(e=parseInt(t.pageX-h-_/2),a=d-e,s=parseInt(t.pageY-p-u/2),r=o-s,f){case"horizontal":if(0===m)switch(g){case"value":case"min":H._pos(e);break;case"range":switch(W){case E:e>n&&(e=n);break;case F:n>e&&(e=n)}H._pos(e);break;case"max":H._pos(a)}else switch(w=Math.abs((y-k)/d),$=Math.abs(k/w),I=parseInt(m/w+$),g){case"value":case"min":x=parseInt(W.css("left")),x-I>e&&H._pos(x-I),e>x+I&&H._pos(x+I);break;case"range":switch(x=parseInt(W.css("left")),W){case E:n+I>e&&(x-I>e&&H._pos(x-I),e>x+I&&H._pos(x+I));break;case F:e>n-I&&(x-I>e&&H._pos(x-I),e>x+I&&H._pos(x+I))}break;case"max":O=parseInt(W.css("right")),O-I>a&&H._pos(O-I),a>O+I&&H._pos(O+I)}break;case"vertical":if(0===m)switch(g){case"value":case"min":H._pos(r);break;case"range":switch(W){case E:r>i&&(r=i);break;case F:i>r&&(r=i)}H._pos(r);break;case"max":H._pos(s)}else switch(w=Math.abs((y-k)/o),$=Math.abs(k/w),I=parseInt(m/w+$),g){case"value":case"min":S=parseInt(W.css("bottom")),S-I>r&&H._pos(S-I),r>S+I&&H._pos(S+I);break;case"range":switch(S=parseInt(W.css("bottom")),W){case E:i+I>r&&(S-I>r&&H._pos(S-I),r>S+I&&H._pos(S+I));break;case F:r>i-I&&(S-I>r&&H._pos(S-I),r>S+I&&H._pos(S+I))}break;case"max":z=parseInt(W.css("top")),z-I>s&&H._pos(z-I),s>z+I&&H._pos(z+I)}}H.fire("slide")}).on("dragend",function(){H.fire("stop"),H=M=B=W=E=F=H.$dragHandle=null})}();var d=s.extend({initializer:function(){var e=this,s=e.selector_=e.get("selector"),n=e.cssClass_=e.get("cssClass"),i=e.orientation_=e.get("orientation"),c=e.min_=e.get("min"),d=e.max_=e.get("max"),o=e.value_=e.get("value"),_=e.type_=e.get("type"),u=(e.step_=Math.abs(e.get("step")),e.animate_=e.get("animate"),e.readOnly_=e.get("readOnly"),e.disabled_=e.get("disabled")),h=(e.hidden_=!1,e.slide_=e.get("slide")||r.emptyEventFunc),p=e.start_=e.get("start")||r.emptyEventFunc,v=e.stop_=e.get("stop")||r.emptyEventFunc,b=e.change_=e.get("change")||r.emptyEventFunc,f=e.create_=e.get("create")||r.emptyEventFunc,g=e.destroy_=e.get("destroy")||r.emptyEventFunc,m=e.$slider=e.get("$target"),k=e.$slider_handle=a(s.handle,m);e.$slider_handle.__self__=e;var y=e.$slider_handle2=null;e.$dragHandle=null;{var w=e.$slider_track=a(s.track,m);e.$slider_range=a(s.range,m)}switch(i){case"horizontal":switch(m.addClass(n.horizontal),_){case"value":m.addClass(n.horizontal_value);break;case"min":m.addClass(n.horizontal_min);break;case"range":m.addClass(n.horizontal_range),y=e.$slider_handle2=k.clone().appendTo(w),e.$slider_handle2.__self__=e;break;case"max":m.addClass(n.horizontal_max)}break;case"vertical":switch(m.addClass(n.vertical),_){case"value":m.addClass(n.vertical_value);break;case"min":m.addClass(n.vertical_min);break;case"range":m.addClass(n.vertical_range),y=e.$slider_handle2=k.clone().appendTo(w),e.$slider_handle2.__self__=e;break;case"max":m.addClass(n.vertical_max)}}e.percent_=parseInt(o/(d-c)*100),new t.Draggable({node:k,move:!1}),"range"===_&&(new t.Draggable({node:y,move:!1}),k.on("focus",function(){e.$dragHandle=k}),y.on("focus",function(){e.$dragHandle=y})),m.on("keydown",function(a){var s=e.readOnly_,t=e.disabled_;if(!s&&!t){var r=a.which;e.value_=l(e.$dragHandle,e,r),e._value(e.value_)}}),e._accessible(),e._value(o),e._disabled(u),e.on("create",function(e){f.call(this,e)}).on("start",function(e){p.call(this,e)}).on("slide",function(e){h.call(this,e)}).on("stop",function(e){v.call(this,e)}).on("change",function(e){b.call(this,e)}).on("destroy",function(e){g.call(this,e)}),e.fire("create")},_accessible:function(e){var a=this,s=a.$slider,t=a.$slider_handle,r=a.$slider_handle2,n=a.readOnly_,i=a.disabled_,c=a.step_,l=a.hidden_,d=a.type_;if(void 0===e)return s.attr({role:"slider","aria-readOnly":n,"aria-disabled":i,"aria-step":c,"aria-hidden":l}),t.attr("tabindex",0),void("range"===d&&r.attr("tabindex",0));var o=a.min_,_=a.max_,u=a.percent_,h=a.value_;if(u>=0&&100>=u)switch(e){case"value":s.attr({"aria-valuemin":o,"aria-valuemax":_,"aria-valuenow":h,"aria-valuetext":h,"data-percent":u});break;case"readOnly":s.attr({"aria-readOnly":n});break;case"disabled":s.attr({"aria-disabled":i});break;case"step":s.attr({"aria-step":c});break;case"hidden":s.attr({"aria-hidden":l})}},_step:function(e){var a=this;"Number"===r.typeOf(e)&&(a.step_=Math.abs(e),a._accessible("step"))},_readOnly:function(e){var a=this;switch(e){case!0:a.readOnly_=!0;break;case!1:a.readOnly_=!1}a._accessible("readOnly")},_disabled:function(e){var a=this,s=a.$slider,t=a.cssClass_;switch(e){case!0:s.addClass(t.disabled),a.disabled_=!0;break;case!1:s.removeClass(t.disabled),a.disabled_=!1}a._accessible("disabled")},_pos:function(e){var a=this,s=a.$dragHandle;if(null!==s){var t,r,n,i,c,l,d,o,_,u,h,p,v,b=a.$slider_handle,f=a.$slider_handle2,g=a.$slider,m=a.$slider_track,k=a.$slider_range,y=a.orientation_,w=a.type_,$=a.max_,I=a.min_;switch(y){case"horizontal":switch(d=m.outerWidth(),o="width",v=s.outerWidth(),_=g.outerWidth()-v,w){case"value":case"min":case"range":c="left",l="right";break;case"max":c="right",l="left"}break;case"vertical":switch(d=m.outerHeight(),o="height",v=s.outerHeight(),_=g.outerHeight()-v,w){case"value":case"min":case"range":c="bottom",l="top";break;case"max":c="top",l="bottom"}}switch(n=Math.abs(($-I)/d),i=Math.abs(I/n),s.css(c,e),w){case"range":switch(t=parseInt(b.css(c)),r=parseInt(f.css(c)),s){case b:k.css(c,"auto").css(l,d-r+v/2).css(o,r-e);break;case f:k.css(l,"auto").css(c,t+v/2).css(o,e-t)}u=parseInt((t-i)*n),u=I>u?I:u,h=parseInt((r-i)*n),h=h>$?$:h,p=[u,h];break;default:k.css(o,e),p=parseInt((e-i)*n)}switch(!0){case 0>e:a._pos(0);break;case e>_:a._pos(_);break;default:a._value(p)}}},_value:function(e){var a,s,t,n,i,c,l,d,o,_,u,h,p,v=this,b=v.orientation_,f=v.type_,g=v.$slider_track,m=v.$slider_handle,k=v.$slider_handle2,y=v.$slider_range,w=v.max_,$=v.min_,I=v.step_;switch(!0){case"String"===r.typeOf(e):if(r.isPercent(e)){a=parseInt(e.split("%")[0]),a=a>100?100:a,s=1;break}return;case"Number"===r.typeOf(e):switch(f){case"range":I=I>0?I:1,_=r.parseIntByStep(e,I),u=r.parseIntByStep(e,I),$>_&&(_=$),u>w&&(u=w),e=[_,u],s=2;break;default:$>e&&(e=$),e>w&&(e=w),s=0}break;case"Array"===r.typeOf(e):switch(e=r.ascendSort(e).slice(0,2),I=I>0?I:1,_=r.parseIntByStep(e[0],I),f){case"range":u=r.parseIntByStep(e[1],I),$>_&&(_=$),u>w&&(u=w),e=[_,u],s=2;break;default:e=_,s=0}}switch(b){case"horizontal":switch(d=g.outerWidth(),o="width",f){case"value":case"min":l="left";break;case"range":l="left",p=m.outerWidth();break;case"max":l="right"}break;case"vertical":switch(d=g.outerHeight(),o="height",f){case"value":case"min":l="bottom";break;case"range":l="bottom",p=m.outerHeight();break;case"max":l="top"}}switch(t=Math.abs((w-$)/d),n=Math.abs($/t),s){case 0:if(e===$||e===w)return;i=parseInt(e/t+n),v.value_=e,v.percent_=parseInt(i/d*100),y.css(o,i);break;case 1:if("range"===f){if(i=parseInt(m.css(l)),c=i+a/100*d,_=parseInt((i-n)*t),u=parseInt((c-n)*t),_=r.parseIntByStep(_,I),u=r.parseIntByStep(u,I),h=a/100*w,$>_&&(_=$),u>w&&(u=w),h>u-_&&(_=h-u+_),u===h&&(_=h-u),_===$||_===w)return;if(u===$||u===w)return;i=parseInt(_/t+n),c=parseInt(u/t+n),v.value_=[_,u],v.percent_=a,k.css(l,c),y.css(l,i+p/2).css(o,c-i)}else{if(i=a/100*d,h=parseInt((i-n)*t),h===$||h===w)return;v.value_=h,v.percent_=a,y.css(o,i)}break;case 2:if(_===$||_===w)return;if(u===$||u===w)return;i=parseInt(_/t+n),c=parseInt(u/t+n),v.value_=e,v.percent_=parseInt((c-i)/d*100),k.css(l,c),y.css(l,i+p/2).css(o,c-i)}m.css(l,i),v._accessible("value"),v.fire("change")},hide:function(){var e=this;e.hidden_=!0,e._accessible("hidden"),e.$slider.hide()},show:function(){var e=this;e.hidden_=!1,e._accessible("hidden"),e.$slider.show()},setter:function(e,a){var s=this;switch(e){case"value":if(s.readOnly_)return;s._value(a);break;case"readOnly":s._readOnly(a);break;case"disabled":s._disabled(a);break;case"step":s._step(a)}},getter:function(e){var a,s=this;switch(e){case"value":a=s.value_;break;case"readOnly":a=s.readOnly_;break;case"disabled":a=s.disabled_;break;case"step":a=s.setp_}return a},destroy:function(){var e=this,a=e.$slider;return e.fire("destroy"),a.remove(),r.collectionGarbage(e)}},{ATTRS:{$target:{value:"",getter:function(e){return a(e)}},selector:{value:{handle:".vc-slider-handle",track:".vc-slider-track",range:".vc-slider-range"}},cssClass:{value:{horizontal_value:"vc-slider-horizontal-value",horizontal_min:"vc-slider-horizontal-min",horizontal_range:"vc-slider-horizontal-range",horizontal_max:"vc-slider-horizontal-max",horizontal:"vc-slider-horizontal",vertical_value:"vc-slider-vertical-value",vertical_min:"vc-slider-vertical-min",vertical_range:"vc-slider-vertical-range",vertical_max:"vc-slider-vertical-max",vertical:"vc-slider-vertical",disabled:"vc-slider-disabled"}},orientation:{value:"horizontal"},min:{value:0},max:{value:100},value:{value:0},type:{value:"value"},step:{value:0},animate:{value:!1},readOnly:{value:!1},disabled:{value:!1}}});return d.prototype.__defineSetter__("value",function(e){var a=this;a._value(e)}),d.prototype.__defineSetter__("readOnly",function(e){var a=this;a._readOnly(e)}),d.prototype.__defineSetter__("disabled",function(e){var a=this;a._disabled(e)}),d.prototype.__defineSetter__("step",function(e){var a=this;a._step(e)}),d.prototype.__defineGetter__("value",function(){var e=this;return e.value_}),d.prototype.__defineGetter__("readOnly",function(){var e=this;return e.readOnly_}),d.prototype.__defineGetter__("disabled",function(){var e=this;return e.disabled_}),d.prototype.__defineGetter__("step",function(){var e=this;return e.step_}),e=d}(),t.exports=r});